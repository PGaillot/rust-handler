name: Deploy
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€

on:
    push:
        branches:
            - master

jobs: 
    build:
        runs-on: ubuntu-22.04
        steps:
            - run: echo "ðŸŽ‰ The job was automatically triggered by a ${{ github.event_name }} event."
            - uses: actions/checkout@v3
            - uses: actions/setup-node@v3

            - name: ðŸª¢ Use Node.js 20
              uses: actions/setup-node@v3
              with:
                node-version: 20.x

            - name: ðŸ› ï¸ Install dependencies
              run: npm ci

            - name: ðŸ—ï¸ Build Website
              run: npm run build

            - name: ðŸ¤ Deploy on Server 
            
              uses: appleboy/scp-action@v0.1.7
              with:
                host: ${{ secrets.SSH_HOST }}
                username: ${{ secrets.SSH_USERNAME }}
                password: ${{ secrets.SSH_PASS }}
                port: ${{ secrets.SSH_PORT }}
                source: './dist/'
                target: './www/rust-hdandler'
            - run: echo                                            _      
                          _   _ _ __    _ __ ___   __ ___  __   __| | ___ 
                          | | | | '_ \  | '_ ` _ \ / _` \ \/ /  / _` |/ _ \
                          | |_| | | | | | | | | | | (_| |>  <  | (_| |  __/
                          \__,_|_| |_| |_| |_| |_|\__,_/_/\_\  \__,_|\___|
                          | | ___  _   ___   _____  ___                    
                          | |/ _ \| | | \ \ / / _ \/ __|                   
                          | | (_) | |_| |\ V /  __/\__ \                   
                          |_|\___/ \__,_| \_/ \___||___/                   
